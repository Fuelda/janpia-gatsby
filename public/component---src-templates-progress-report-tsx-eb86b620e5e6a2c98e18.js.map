{"version":3,"file":"component---src-templates-progress-report-tsx-eb86b620e5e6a2c98e18.js","mappings":"mPAkLA,UAjKsCA,IAA2B,IAA1B,KAAEC,EAAI,YAAEC,GAAa,EAC1D,MAAM,KAAEC,GAASD,GACX,EAACE,EAAU,EAAEC,IAAiBC,EAAAA,EAAAA,UAAS,IACvC,EAACC,EAAM,EAAEC,IAAaF,EAAAA,EAAAA,WAAS,IAC/B,iCACJG,EAAgC,iCAChCC,EAAgC,qBAEhCC,EAAoB,qBACpBC,EAAoB,2BACpBC,EAA0B,2BAC1BC,EAA0B,2BAC1BC,EAA0B,2BAC1BC,EAA0B,qBAC1BC,EAAoB,8BACpBC,EAA6B,8BAC7BC,EAA6B,8BAC7BC,EAA6B,yBAC7BC,EAAwB,yBACxBC,EAAwB,yBACxBC,EAAwB,yBACxBC,EAAwB,0BACxBC,EAAyB,0BACzBC,EAAyB,8BACzBC,EAA6B,8BAC7BC,EAA6B,8BAC7BC,EAA6B,8BAC7BC,EAA6B,sBAC7BC,EAAqB,sBACrBC,EAAqB,4BACrBC,EAA2B,4BAC3BC,GACEjC,GAEE,eACJkC,EAAc,YACdC,EAAW,WACXC,EAAU,aACVC,EAAY,WACZC,EAAU,cACVC,EAAa,aACbC,GAAY,WACZC,GAAU,UACVC,KACEC,EAAAA,EAAAA,KAEEC,GAAgC,GAAH,eAC9BpC,EAAiCqC,QAAK,OACtCpC,EAAiCoC,QAGhCC,GACJF,IACAA,GAA8BG,MAAK,CAACC,EAAQC,KAC5BD,EAAEE,KAAKC,eAAiBH,EAAEE,KAAKC,eAAeC,KAAO,IACrDH,EAAEC,KAAKC,eAAiBF,EAAEC,KAAKC,eAAeC,KAAO,KAIjEC,GAAaT,GACfA,GAA8BU,KAAKC,GACjCA,EAAIL,KAAKC,eAAiBI,EAAIL,KAAKC,eAAeC,KAAO,IAE3D,GACEI,GAAYC,KAAKC,IAAG,MAARD,MAAI,OAAQJ,MAC9BM,EAAAA,EAAAA,YAAU,KACRvD,EAAcoD,GAAU,GACvB,CAACA,KAEJ,MAAMI,GACJhB,IACAA,GAA8BiB,MAC3BN,GACCA,EAAIL,KAAKC,gBAAkBI,EAAIL,KAAKC,eAAeC,OAASjD,IAG5D2D,GAAsB,uCADNF,IAAeA,GAAYV,KAAKlD,KAAK+D,KACoB,iBAgC/E,OA9BAJ,EAAAA,EAAAA,YAAU,KACRzB,EACExB,GACEC,GACAC,GACAC,GACAC,GACAC,GAEJoB,EACEnB,GACEC,GACAC,GAEJkB,EAAWjB,GACXkB,EAAajB,GAA4BC,GACzCiB,EAAWhB,GAA4BC,GACvCgB,EAAcf,GAA6BC,GAC3Ce,GACEd,GAAiCC,GAEnCc,GAAWb,GAAiCC,GAC5Ca,GACEZ,GACEC,GACAC,GACAC,EACH,GACA,KAGD+B,EAAAA,EAAAA,IAACC,EAAAA,EAAM,MACLD,EAAAA,EAAAA,IAACE,EAAAA,EAAG,CAACC,MAAM,iCACXH,EAAAA,EAAAA,IAACI,EAAAA,EAAY,CAACC,YAAanE,KAC3B8D,EAAAA,EAAAA,IAAAA,EAAAA,MACEA,EAAAA,EAAAA,IAACM,EAAAA,EAAa,CAACpE,KAAMA,KACrB8D,EAAAA,EAAAA,IAACO,EAAAA,EAAa,CACZC,SAAS,WACTtE,KAAMA,EACNuE,UAAWb,IAAeA,GAAYV,KAAKuB,YAE3CT,EAAAA,EAAAA,IAAAA,EAAAA,KACGlB,IACCA,GAA2BQ,KACzB,CAACC,EAAUmB,IACTnB,EAAIL,KAAKC,iBACPa,EAAAA,EAAAA,IAAAA,EAAAA,CACEW,IAAKD,EAMLE,QAAS,IACPxE,EAAcmD,EAAIL,KAAKC,eAAeC,MACvCyB,MAPI,CACHC,EAAAA,GACA3E,IAAeoD,EAAIL,KAAKC,eAAeC,MACrC2B,EAAAA,KAMHxB,EAAIL,KAAKC,eAAe6B,WAKrChB,EAAAA,EAAAA,IAAAA,EAAAA,KACGJ,IACCI,EAAAA,EAAAA,IAAAA,MAAAA,MACI1D,IAAU0D,EAAAA,EAAAA,IAAAA,IAAAA,KAAG,kBACfA,EAAAA,EAAAA,IAAAA,SAAAA,CACEiB,MAAM,OACNC,OAAO,QACPC,IAAKrB,GACLsB,OAAQ,IAAM7E,GAAU,OAI5ByD,EAAAA,EAAAA,IAAAA,IAAAA,KAAG,gBAKJ,EA8LX,uCAAAqB,YAAAA,6BAAAC,YAAAA,eAAA,SA3OcC,EAAAA,IAAU,mCAAAF,YAAAA,8BAAAC,YAAAA,eAAA,SAONE,EAAAA,IAAS,sCAAAH,YAAAA,gCAAAC,YAAAA,eAAA,0DAAAD,YAAAA,8BAAAC,YAAAA,eAAA,SAqBTG,EAAAA,G","sources":["webpack://janpia-disclosure/./src/templates/progressReport.tsx"],"sourcesContent":["import { graphql } from \"gatsby\";\nimport React, { useEffect, useState } from \"react\";\nimport Layout from \"../components/lauout/Layout\";\nimport DetailHeader from \"../components/lauout/DetailHeader\";\nimport DetailSidebar from \"../components/organisms/DetailSidebar\";\nimport \"twin.macro\";\nimport DetailWrapper from \"../components/lauout/DetailWrapper\";\nimport {\n  detailBody,\n  detailFlex,\n  detailRoundTabBtn,\n  detailTab,\n  detailTabBtnSelected,\n} from \"../styles/detailPage\";\nimport { useDetailContext } from \"../context/detailContext\";\nimport Seo from \"../components/lauout/Seo\";\n\nconst ProgressReport: React.FC<any> = ({ data, pageContext }) => {\n  const { slug } = pageContext;\n  const [currentTab, setCurrentTab] = useState(1);\n  const [loaded, setLoaded] = useState(false);\n  const {\n    allStrapiProgressReportManualFDO,\n    allStrapiProgressReportManualADO,\n    //サイドバーチェック用\n    strapiFinancePlanFDO,\n    strapiFinancePlanADO,\n    strapiFinancePlanFormerFDO,\n    strapiFinancePlanFormerADO,\n    strapiFinancePlanManualFDO,\n    strapiFinancePlanManualADO,\n    strapiEvaluationPlan,\n    strapiEvaluationPlanManualFDO,\n    strapiEvaluationPlanManualADO,\n    strapiOfferingReportManualFDO,\n    strapiPreReportManualFDO,\n    strapiPreReportManualADO,\n    strapiMidReportManualFDO,\n    strapiMidReportManualADO,\n    strapiPostReportManualFDO,\n    strapiPostReportManualADO,\n    strapiProgressReportManualFDO,\n    strapiProgressReportManualADO,\n    strapiCompleteReportManualFDO,\n    strapiCompleteReportManualADO,\n    strapiSettleReportFDO,\n    strapiSettleReportADO,\n    strapiSettleReportManualFDO,\n    strapiSettleReportManualADO,\n  } = data;\n\n  const {\n    setWithFinance,\n    setWithEval,\n    setWithORM,\n    setWithPreRM,\n    setWithMRM,\n    setWithPostRM,\n    setWithProRM,\n    setWithCRM,\n    setWithSR,\n  } = useDetailContext();\n\n  const allStrapiProgressReportManual = [\n    ...allStrapiProgressReportManualFDO.edges,\n    ...allStrapiProgressReportManualADO.edges,\n  ];\n\n  const sortedProgressReportManual =\n    allStrapiProgressReportManual &&\n    allStrapiProgressReportManual.sort((a: any, b: any) => {\n      const itemA = a.node.progress_round ? a.node.progress_round.code : 0;\n      const itemB = b.node.progress_round ? b.node.progress_round.code : 0;\n      return itemA - itemB;\n    });\n\n  const roundArray = allStrapiProgressReportManual\n    ? allStrapiProgressReportManual.map((prm: any) =>\n        prm.node.progress_round ? prm.node.progress_round.code : 0\n      )\n    : [];\n  const minRouond = Math.min(...roundArray);\n  useEffect(() => {\n    setCurrentTab(minRouond);\n  }, [minRouond]);\n\n  const currentItem =\n    allStrapiProgressReportManual &&\n    allStrapiProgressReportManual.find(\n      (prm: any) =>\n        prm.node.progress_round && prm.node.progress_round.code === currentTab\n    );\n  const currentPdfUrl = currentItem && currentItem.node.data.url;\n  const googleDocsViewerUrl = `https://docs.google.com/viewer?url=${currentPdfUrl}&embedded=true`;\n\n  useEffect(() => {\n    setWithFinance(\n      strapiFinancePlanFDO ||\n        strapiFinancePlanADO ||\n        strapiFinancePlanFormerFDO ||\n        strapiFinancePlanFormerADO ||\n        strapiFinancePlanManualFDO ||\n        strapiFinancePlanManualADO\n    );\n    setWithEval(\n      strapiEvaluationPlan ||\n        strapiEvaluationPlanManualFDO ||\n        strapiEvaluationPlanManualADO\n    );\n    setWithORM(strapiOfferingReportManualFDO);\n    setWithPreRM(strapiPreReportManualFDO || strapiPreReportManualADO);\n    setWithMRM(strapiMidReportManualFDO || strapiMidReportManualADO);\n    setWithPostRM(strapiPostReportManualFDO || strapiPostReportManualADO);\n    setWithProRM(\n      strapiProgressReportManualFDO || strapiProgressReportManualADO\n    );\n    setWithCRM(strapiCompleteReportManualFDO || strapiCompleteReportManualADO);\n    setWithSR(\n      strapiSettleReportFDO ||\n        strapiSettleReportADO ||\n        strapiSettleReportManualFDO ||\n        strapiSettleReportManualADO\n    );\n  }, []);\n\n  return (\n    <Layout>\n      <Seo title=\"進捗/年度末報告 | 休眠預金活用事業 情報公開サイト\" />\n      <DetailHeader business_cd={slug} />\n      <div css={detailFlex}>\n        <DetailSidebar slug={slug} />\n        <DetailWrapper\n          category=\"進捗/年度末報告\"\n          slug={slug}\n          updatedAt={currentItem && currentItem.node.updatedAt}\n        >\n          <div css={detailTab}>\n            {sortedProgressReportManual &&\n              sortedProgressReportManual.map(\n                (prm: any, index) =>\n                  prm.node.progress_round && (\n                    <button\n                      key={index}\n                      css={[\n                        detailRoundTabBtn,\n                        currentTab === prm.node.progress_round.code &&\n                          detailTabBtnSelected,\n                      ]}\n                      onClick={() =>\n                        setCurrentTab(prm.node.progress_round.code)\n                      }\n                    >\n                      {prm.node.progress_round.label}\n                    </button>\n                  )\n              )}\n          </div>\n          <div css={detailBody}>\n            {currentItem ? (\n              <div>\n                {!loaded && <p>PDFのロード中です...</p>}\n                <iframe\n                  width=\"100%\"\n                  height=\"500px\"\n                  src={googleDocsViewerUrl}\n                  onLoad={() => setLoaded(true)}\n                ></iframe>\n              </div>\n            ) : (\n              <p>データはありません</p>\n            )}\n          </div>\n        </DetailWrapper>\n      </div>\n    </Layout>\n  );\n};\n\nexport default ProgressReport;\n\nexport const pageQuery = graphql`\n  query MyQuery($slug: String!) {\n    allStrapiProgressReportManualFDO: allStrapiProgressReportManual(\n      filter: {\n        biz_cd_fund_distr: { eq: $slug }\n        business_org_type: { eq: \"F\" }\n      }\n    ) {\n      edges {\n        node {\n          updatedAt(formatString: \"YYYY/MM/DD\")\n          data {\n            url\n          }\n          progress_round {\n            code\n            label\n          }\n        }\n      }\n    }\n    allStrapiProgressReportManualADO: allStrapiProgressReportManual(\n      filter: {\n        biz_cd_executive: { eq: $slug }\n        business_org_type: { eq: \"A\" }\n      }\n    ) {\n      edges {\n        node {\n          updatedAt(formatString: \"YYYY/MM/DD\")\n          data {\n            url\n          }\n          progress_round {\n            code\n            label\n          }\n        }\n      }\n    }\n\n    # サイドバーチェック用\n    strapiFinancePlanFDO: strapiFinancePlan(\n      biz_cd_fund_distr: { eq: $slug }\n      business_org_type: { eq: \"F\" }\n    ) {\n      id\n    }\n    strapiFinancePlanADO: strapiFinancePlan(\n      biz_cd_executive: { eq: $slug }\n      business_org_type: { eq: \"A\" }\n    ) {\n      id\n    }\n    strapiFinancePlanFormerFDO: strapiFinancePlanFormer(\n      biz_cd_fund_distr: { eq: $slug }\n      business_org_type: { eq: \"F\" }\n    ) {\n      id\n    }\n    strapiFinancePlanFormerADO: strapiFinancePlanFormer(\n      biz_cd_executive: { eq: $slug }\n      business_org_type: { eq: \"A\" }\n    ) {\n      id\n    }\n    strapiFinancePlanManualFDO: strapiFinancePlanManual(\n      biz_cd_fund_distr: { eq: $slug }\n      business_org_type: { eq: \"F\" }\n    ) {\n      id\n    }\n    strapiFinancePlanManualADO: strapiFinancePlanManual(\n      biz_cd_executive: { eq: $slug }\n      business_org_type: { eq: \"A\" }\n    ) {\n      id\n    }\n    strapiEvaluationPlan(business_cd: { eq: $slug }) {\n      id\n    }\n    strapiEvaluationPlanManualFDO: strapiEvaluationPlanManual(\n      biz_cd_fund_distr: { eq: $slug }\n      business_org_type: { eq: \"F\" }\n    ) {\n      id\n    }\n    strapiEvaluationPlanManualADO: strapiEvaluationPlanManual(\n      biz_cd_executive: { eq: $slug }\n      business_org_type: { eq: \"A\" }\n    ) {\n      id\n    }\n    strapiOfferingReportManualFDO: strapiOfferingReportManual(\n      biz_cd_fund_distr: { eq: $slug }\n      business_org_type: { eq: \"F\" }\n    ) {\n      id\n    }\n    strapiPreReportManualFDO: strapiPreReportManual(\n      biz_cd_fund_distr: { eq: $slug }\n      business_org_type: { eq: \"F\" }\n    ) {\n      id\n    }\n    strapiPreReportManualADO: strapiPreReportManual(\n      biz_cd_executive: { eq: $slug }\n      business_org_type: { eq: \"A\" }\n    ) {\n      id\n    }\n    strapiMidReportManualFDO: strapiMidReportManual(\n      biz_cd_fund_distr: { eq: $slug }\n      business_org_type: { eq: \"F\" }\n    ) {\n      id\n    }\n    strapiMidReportManualADO: strapiMidReportManual(\n      biz_cd_executive: { eq: $slug }\n      business_org_type: { eq: \"A\" }\n    ) {\n      id\n    }\n    strapiPostReportManualFDO: strapiPostReportManual(\n      biz_cd_fund_distr: { eq: $slug }\n      business_org_type: { eq: \"F\" }\n    ) {\n      id\n    }\n    strapiPostReportManualADO: strapiPostReportManual(\n      biz_cd_executive: { eq: $slug }\n      business_org_type: { eq: \"A\" }\n    ) {\n      id\n    }\n    strapiProgressReportManualFDO: strapiProgressReportManual(\n      biz_cd_fund_distr: { eq: $slug }\n      business_org_type: { eq: \"F\" }\n    ) {\n      id\n    }\n    strapiProgressReportManualADO: strapiProgressReportManual(\n      biz_cd_executive: { eq: $slug }\n      business_org_type: { eq: \"A\" }\n    ) {\n      id\n    }\n    strapiCompleteReportManualFDO: strapiCompleteReportManual(\n      biz_cd_fund_distr: { eq: $slug }\n      business_org_type: { eq: \"F\" }\n    ) {\n      id\n    }\n    strapiCompleteReportManualADO: strapiCompleteReportManual(\n      biz_cd_executive: { eq: $slug }\n      business_org_type: { eq: \"A\" }\n    ) {\n      id\n    }\n    strapiSettleReportFDO: strapiSettleReport(\n      biz_cd_fund_distr: { eq: $slug }\n      business_org_type: { eq: \"F\" }\n    ) {\n      id\n    }\n    strapiSettleReportADO: strapiSettleReport(\n      biz_cd_executive: { eq: $slug }\n      business_org_type: { eq: \"A\" }\n    ) {\n      id\n    }\n    strapiSettleReportManualFDO: strapiSettleReportManual(\n      biz_cd_fund_distr: { eq: $slug }\n      business_org_type: { eq: \"F\" }\n    ) {\n      id\n    }\n    strapiSettleReportManualADO: strapiSettleReportManual(\n      biz_cd_executive: { eq: $slug }\n      business_org_type: { eq: \"A\" }\n    ) {\n      id\n    }\n  }\n`;\n"],"names":["_ref","data","pageContext","slug","currentTab","setCurrentTab","useState","loaded","setLoaded","allStrapiProgressReportManualFDO","allStrapiProgressReportManualADO","strapiFinancePlanFDO","strapiFinancePlanADO","strapiFinancePlanFormerFDO","strapiFinancePlanFormerADO","strapiFinancePlanManualFDO","strapiFinancePlanManualADO","strapiEvaluationPlan","strapiEvaluationPlanManualFDO","strapiEvaluationPlanManualADO","strapiOfferingReportManualFDO","strapiPreReportManualFDO","strapiPreReportManualADO","strapiMidReportManualFDO","strapiMidReportManualADO","strapiPostReportManualFDO","strapiPostReportManualADO","strapiProgressReportManualFDO","strapiProgressReportManualADO","strapiCompleteReportManualFDO","strapiCompleteReportManualADO","strapiSettleReportFDO","strapiSettleReportADO","strapiSettleReportManualFDO","strapiSettleReportManualADO","setWithFinance","setWithEval","setWithORM","setWithPreRM","setWithMRM","setWithPostRM","setWithProRM","setWithCRM","setWithSR","useDetailContext","allStrapiProgressReportManual","edges","sortedProgressReportManual","sort","a","b","node","progress_round","code","roundArray","map","prm","minRouond","Math","min","useEffect","currentItem","find","googleDocsViewerUrl","url","___EmotionJSX","Layout","Seo","title","DetailHeader","business_cd","DetailSidebar","DetailWrapper","category","updatedAt","index","key","onClick","$_css","detailRoundTabBtn","detailTabBtnSelected","label","width","height","src","onLoad","displayName","componentId","detailFlex","detailTab","detailBody"],"sourceRoot":""}